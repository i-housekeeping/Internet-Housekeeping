(function(){var A=Ext.lib.Ajax;A.Queue=function(config){config=config?(config.name?config:{name:config}):{};Ext.apply(this,config,{name:"q-default",priority:5,FIFO:true,callback:null,scope:null,suspended:false,progressive:false});this.requests=new Array();this.pending=false;this.priority=this.priority>9?9:(this.priority<0?0:this.priority);};Ext.extend(A.Queue,Object,{add:function(req){var permit=A.events?A.fireEvent("beforequeue",this,req):true;if(permit!==false){this.requests.push(req);this.pending=true;A.pendingRequests++;if(this.manager){this.manager.start();}}},suspended:false,activeRequest:null,next:function(peek){var req=peek?this.requests[this.FIFO?"first":"last"]():this.requests[this.FIFO?"shift":"pop"]();if(this.requests.length==0){this.pending=false;if(this.callback){this.callback.call(this.scope||null,this);}if(A.events){A.fireEvent("queueempty",this);}}return req||null;},clear:function(){this.suspend();A.pendingRequests-=this.requests.length;this.requests.length=0;this.pending=false;this.resume();this.next();},suspend:function(){this.suspended=true;},resume:function(){this.suspended=false;},requestNext:function(peek){var req;this.activeRequest=null;if(!this.suspended&&(req=this.next(peek))){if(req.active){this.activeRequest=A.request.apply(A,req);A.pendingRequests--;}else{return this.requestNext(peek);}}return this.activeRequest;}});A.QueueManager=function(config){Ext.apply(this,config||{},{quantas:10,priorityQueues:new Array(new Array(),new Array(),new Array(),new Array(),new Array(),new Array(),new Array(),new Array(),new Array(),new Array()),queues:{}});};Ext.extend(A.QueueManager,Object,{getQueue:function(name){return this.queues[name];},createQueue:function(config){if(!config){return null;}var q=new A.Queue(config);q.manager=this;this.queues[q.name]=q;var pqa=this.priorityQueues[q.priority];if(pqa&&pqa.indexOf(q.name)==-1){pqa.push(q.name);}return q;},removeQueue:function(q){if(q&&(q=this.getQueue(q.name||q))){q.clear();this.priorityQueues[q.priority].remove(q.name);delete this.queues[q.name];}},start:function(){if(!this.started){this.started=true;this.dispatch();}return this;},suspendAll:function(){forEach(this.queues,function(Q){Q.suspend();});},resumeAll:function(){forEach(this.queues,function(Q){Q.resume();});this.start();},progressive:false,stop:function(){this.started=false;return this;},dispatch:function(){var qm=this,qmq=qm.queues;var quit=(A.activeRequests>A.maxConcurrentRequests);while(A.pendingRequests&&!quit){var disp=function(qName){var q=qmq[qName],AR;while(q&&!q.suspended&&q.pending&&q.requestNext()){quit||(quit=A.activeRequests>A.maxConcurrentRequests);if(quit){break;}if(q.progressive||qm.progressive){break;}}if(quit){return false;}};Ext.each(this.priorityQueues,function(pqueue){if(!!pqueue.length){Ext.each(pqueue,disp,this);}quit||(quit=A.activeRequests>A.maxConcurrentRequests);if(quit){return false;}},this);}if(A.pendingRequests||quit){this.dispatch.defer(this.quantas,this);}else{this.stop();}}});Ext.apply(A,{queueManager:new A.QueueManager(),queueAll:false,activeRequests:0,pendingRequests:0,maxConcurrentRequests:10,forceActiveX:false,async:true,createXhrObject:function(transactionId){var obj={status:{isError:false},tId:transactionId},http;try{if(Ext.isIE7&&!!this.forceActiveX){throw ("IE7forceActiveX");}obj.conn=new XMLHttpRequest();}catch(eo){for(var i=0;i<this.activeX.length;++i){try{obj.conn=new ActiveXObject(this.activeX[i]);break;}catch(e){}}}finally{obj.status.isError=typeof (obj.conn)=="undefined";}return obj;},encoder:encodeURIComponent,serializeForm:function(form){if(typeof form=="string"){form=(document.getElementById(form)||document.forms[form]);}var el,name,val,disabled,data="",hasSubmit=false;for(var i=0;i<form.elements.length;i++){el=form.elements[i];disabled=form.elements[i].disabled;name=form.elements[i].name;val=form.elements[i].value;if(!disabled&&name){switch(el.type){case"select-one":case"select-multiple":for(var j=0;j<el.options.length;j++){if(el.options[j].selected){if(Ext.isIE){data+=this.encoder(name)+"="+this.encoder(el.options[j].attributes["value"].specified?el.options[j].value:el.options[j].text)+"&";}else{data+=this.encoder(name)+"="+this.encoder(el.options[j].hasAttribute("value")?el.options[j].value:el.options[j].text)+"&";}}}break;case"radio":case"checkbox":if(el.checked){data+=this.encoder(name)+"="+this.encoder(val)+"&";}break;case"file":case undefined:case"reset":case"button":break;case"submit":if(hasSubmit===false){data+=this.encoder(name)+"="+this.encoder(val)+"&";hasSubmit=true;}break;default:data+=this.encoder(name)+"="+this.encoder(val)+"&";break;}}}data=data.substr(0,data.length-1);return data;},getHttpStatus:function(reqObj){var statObj={status:0,statusText:"",isError:false,isLocal:false,isOK:false,error:null,isAbort:false,isTimeout:false};try{if(!reqObj){throw ("noobj");}statObj.status=reqObj.status;statObj.readyState=reqObj.readyState;statObj.isLocal=(!reqObj.status&&location.protocol=="file:")||(Ext.isSafari&&reqObj.status===undefined);statObj.isOK=(statObj.isLocal||(statObj.status==304||statObj.status==1223||(statObj.status>199&&statObj.status<300)));statObj.statusText=reqObj.statusText||"";}catch(e){}return statObj;},handleTransactionResponse:function(o,callback,isAbort){callback=callback||{};var responseObject=null;A.activeRequests--;if(!o.status.isError){o.status=this.getHttpStatus(o.conn);responseObject=this.createResponseObject(o,callback.argument,isAbort);}if(o.status.isError){responseObject=Ext.apply({},responseObject||{},this.createExceptionObject(o.tId,callback.argument,(isAbort?isAbort:false)));}responseObject.options=o.options;responseObject.fullStatus=o.status;if(!this.events||this.fireEvent("status:"+o.status.status,o.status.status,o,responseObject,callback,isAbort)!==false){if(o.status.isOK&&!o.status.isError){if(!this.events||this.fireEvent("response",o,responseObject,callback,isAbort)!==false){if(callback.success){callback.success.call(callback.scope||null,responseObject);}}}else{if(!this.events||this.fireEvent("exception",o,responseObject,callback,isAbort)!==false){if(callback.failure){callback.failure.call(callback.scope||null,responseObject);}}}}if(o.options.async){this.releaseObject(o);responseObject=null;}else{this.releaseObject(o);return responseObject;}},decodeJSON:Ext.decode,reCtypeJSON:/(application|text)\/json/i,createResponseObject:function(o,callbackArg,isAbort){var obj={responseXML:null,responseText:"",responseStream:null,responseJSON:null,getResponseHeader:{},getAllResponseHeaders:""};var headerObj={},headerStr="";if(isAbort!==true){try{obj.responseText=o.conn.responseText;obj.responseStream=o.conn.responseStream||null;}catch(e){o.status.isError=true;o.status.error=e;}try{obj.responseXML=o.conn.responseXML||null;}catch(ex){}try{headerStr=o.conn.getAllResponseHeaders()||"";}catch(ex1){}if((o.status.isLocal||o.proxied)&&typeof obj.responseText=="string"){o.status.isOK=!o.status.isError&&((o.status.status=(!!obj.responseText.length)?200:404)==200);if(o.status.isOK&&(!obj.responseXML||(obj.responseXML&&obj.responseXML.childNodes.length===0))){var xdoc=null;try{if(window.ActiveXObject){xdoc=new ActiveXObject("MSXML2.DOMDocument.3.0");xdoc.async=false;xdoc.loadXML(obj.responseText);}else{var domParser=null;try{domParser=new DOMParser();xdoc=domParser.parseFromString(obj.responseText,"application/xml");}catch(exP){}finally{domParser=null;}}}catch(exd){o.status.isError=true;o.status.error=exd;}obj.responseXML=xdoc;}if(obj.responseXML){var parseBad=(obj.responseXML.documentElement&&obj.responseXML.documentElement.nodeName=="parsererror")||(obj.responseXML.parseError||0)!==0||obj.responseXML.childNodes.length===0;if(!parseBad){headerStr="Content-Type: "+(obj.responseXML.contentType||"text/xml")+"\n"+headerStr;}}}var header=headerStr.split("\n");for(var i=0;i<header.length;i++){var delimitPos=header[i].indexOf(":");if(delimitPos!=-1){headerObj[header[i].substring(0,delimitPos)]=header[i].substring(delimitPos+2);}}if(o.options.isJSON||(this.reCtypeJSON&&this.reCtypeJSON.test(headerObj["Content-Type"]||""))){try{obj.responseJSON=typeof this.decodeJSON=="function"?this.decodeJSON(obj.responseText):null;}catch(exJSON){o.status.isError=true;o.status.error=exJSON;}}}o.status.proxied=!!o.proxied;Ext.apply(obj,{tId:o.tId,status:o.status.status,statusText:o.status.statusText,getResponseHeader:headerObj,getAllResponseHeaders:headerStr,fullStatus:o.status});if(typeof callbackArg!="undefined"){obj.argument=callbackArg;}return obj;},setDefaultPostHeader:function(contentType){this.defaultPostHeader=contentType;},setDefaultXhrHeader:function(bool){this.useDefaultXhrHeader=bool||false;},request:function(method,uri,cb,data,options){options=Ext.apply({async:this.async||false,headers:false,userId:null,password:null,xmlData:null,jsonData:null,queue:null,proxied:false},options||{});if(!this.events||this.fireEvent("request",method,uri,cb,data,options)!==false){if(!options.queued&&(options.queue||(options.queue=this.queueAll||null))){if(options.queue===true){options.queue={name:"q-default"};}var oq=options.queue;var qname=oq.name||oq,qm=this.queueManager;var q=qm.getQueue(qname)||qm.createQueue(oq);options.queue=q;options.queued=true;var req=[method,uri,cb,data,options];req.active=true;q.add(req);return{tId:this.transactionId++,queued:true,request:req,options:options};}var hs=options.headers;if(hs){for(var h in hs){if(hs.hasOwnProperty(h)){this.initHeader(h,hs[h],false);}}}var cType;if(cType=(this.headers?this.headers["Content-Type"]||null:null)){delete this.headers["Content-Type"];}if(options.xmlData){cType||(cType="text/xml");method="POST";data=options.xmlData;}else{if(options.jsonData){cType||(cType="application/json");method="POST";data=typeof options.jsonData=="object"?Ext.encode(options.jsonData):options.jsonData;}}if(data){cType||(cType=this.useDefaultHeader?this.defaultPostHeader:null);if(cType){this.initHeader("Content-Type",cType,false);}}return this.makeRequest(options.method||method,uri,cb,data,options);}return null;},getConnectionObject:function(uri,options){var o,f,e=Ext.emptyFn;var tId=this.transactionId;options||(options={});try{if(f=options.proxied){o={tId:tId,status:{},proxied:true,conn:{el:null,send:function(){var doc=(f.target||window).document,head=doc.getElementsByTagName("head")[0];if(head&&this.el){head.appendChild(this.el);}},abort:function(){this.readyState=0;},setRequestHeader:e,getAllResponseHeaders:e,onreadystatechange:null,readyState:0,status:0,responseText:null,responseXML:null},debug:f.debug,params:options.params||{},cbName:f.callbackName||"basexCallback"+tId,cbParam:f.callbackParam||null};window[o.cbName]=o.cb=function(content,request){if(content&&typeof content=="object"){this.responseJSON=content;this.responseText=Ext.encode(content);}else{this.responseText=content||null;}this.readyState=4;this.status=!!content?200:404;if(typeof this.onreadystatechange=="function"){this.onreadystatechange();}(function(){this.el.onload=(this.el.onreadystatechange=e);window[request.cbName]=undefined;try{delete window[request.cbName];}catch(ex){}if(!request.debug){var p=this.el.parentElement||this.el.parentNode;if(p){p.removeChild(this.el);}p=null;}this.el=null;}).defer(100,this);}.createDelegate(o.conn,[o],true);o.conn.open=function(){if(o.cbParam){o.params[o.cbParam]=o.cbName;}var params=Ext.urlEncode(o.params)||null;this.el=domNode(f.tag||"script",{type:"text/javascript",src:params?uri+(uri.indexOf("?")!=-1?"&":"?")+params:uri,charset:f.charset||options.charset||null},null,f.target,true);};o.conn.readyState=1;if(typeof o.conn.onreadystatechange=="function"){o.conn.onreadystatechange();}options.async=true;}else{o=this.createXhrObject(tId);}if(o){this.transactionId++;}}catch(ex3){}finally{return o;}},makeRequest:function(method,uri,callback,postData,options){var o=this.getConnectionObject(uri,options);if(!o||o.status.isError){return Ext.apply(o,this.handleTransactionResponse(o,callback));}else{o.options=options;A.activeRequests++;try{o.conn.open(method.toUpperCase(),uri,options.async,options.userId,options.password);o.conn.onreadystatechange=this.onReadyState?this.onReadyState.createDelegate(this,[o],0):Ext.emptyFn;}catch(ex){o.status.isError=true;o.status.error=ex;return Ext.apply(o,this.handleTransactionResponse(o,callback));}if(this.useDefaultXhrHeader){if(!this.defaultHeaders["X-Requested-With"]){this.initHeader("X-Requested-With",this.defaultXhrHeader,true);}}if(this.hasDefaultHeaders||this.hasHeaders){this.setHeader(o);}if(o.options.async){this.handleReadyState(o,callback);}try{if(!this.events||this.fireEvent("beforesend",o,method,uri,callback,postData,options)!==false){o.conn.send(postData||null);}}catch(exr){o.status.isError=true;o.status.error=exr;return Ext.apply(o,this.handleTransactionResponse(o,callback));}return options.async?o:Ext.apply(o,this.handleTransactionResponse(o,callback));}},abort:function(o,callback,isTimeout){if(o&&o.queued&&o.request){o.request.active=o.queued=false;if(this.events){this.fireEvent("abort",o,callback);}}else{if(o&&this.isCallInProgress(o)){o.conn.abort();window.clearInterval(this.poll[o.tId]);delete this.poll[o.tId];if(isTimeout){delete this.timeout[o.tId];}o.status.isAbort=!(o.status.isTimeout=isTimeout||false);if(this.events){this.fireEvent(isTimeout?"timeout":"abort",o,callback);}this.handleTransactionResponse(o,callback,true);return true;}else{return false;}}},clearAuthenticationCache:function(url){try{if(Ext.isIE){document.execCommand("ClearAuthenticationCache");}else{var xmlhttp;if(xmlhttp=new XMLHttpRequest()){xmlhttp.open("GET",url||"/@@",true,"logout","logout");xmlhttp.send("");xmlhttp.abort.defer(100,xmlhttp);}}}catch(e){}}});var domNode=function(tag,attributes,callback,context,deferred){attributes=Ext.apply({},attributes||{});context||(context=window);var node=null,doc=context.document,head=doc.getElementsByTagName("head")[0];if(doc&&head&&(node=doc.createElement(tag))){for(var attrib in attributes){if(attributes[attrib]&&attributes.hasOwnProperty(attrib)&&attrib in node){node.setAttribute(attrib,attributes[attrib]);}}if(callback){var cb=(callback.success||callback).createDelegate(callback.scope||null,[callback],0);if(Ext.isIE){node.onreadystatechange=node.onload=function(){if(/loaded|complete|4/i.test(String(this.readyState))){cb();}}.createDelegate(node);}else{if(Ext.isSafari3&&tag=="script"){node.addEventListener("load",cb);}else{if(Ext.isSafari){cb.defer(50);}else{tag!=="link"||Ext.isOpera?Ext.get(node).on("load",cb):cb.defer(50);}}}}if(!deferred){head.appendChild(node);}}return node;};var StopIter="StopIteration";if(Ext.util.Observable){Ext.apply(A,{events:{request:true,beforesend:true,response:true,exception:true,abort:true,timeout:true,readystatechange:true,beforequeue:true,queue:true,queueempty:true},onStatus:function(status,fn,scope,options){var args=Array.prototype.slice.call(arguments,1);status=new Array().concat(status||new Array());Ext.each(status,function(statusCode){statusCode=parseInt(statusCode,10);if(!isNaN(statusCode)){var ev="status:"+statusCode;this.events[ev]||(this.events[ev]=true);this.on.apply(this,[ev].concat(args));}},this);},unStatus:function(status,fn,scope,options){var args=Array.prototype.slice.call(arguments,1);status=new Array().concat(status||new Array());Ext.each(status,function(statusCode){statusCode=parseInt(statusCode,10);if(!isNaN(statusCode)){var ev="status:"+statusCode;this.un.apply(this,[ev].concat(args));}},this);},onReadyState:function(){this.fireEvent.apply(this,["readystatechange"].concat(Array.prototype.slice.call(arguments,0)));}},new Ext.util.Observable());Ext.hasBasex=true;Ext.ux.ModuleManager=function(config){Ext.apply(this,config||{},{modulePath:function(){var d=location.href.indexOf("/")!=-1?"/":"\\";var u=location.href.split(d);u.pop();return u.join(d)+d;}()});this.addEvents({"loadexception":true,"alreadyloaded":true,"load":true,"beforeload":true,"complete":true,"timeout":true});Ext.ux.ModuleManager.superclass.constructor.call(this);};var gather=function(method,url,callbacks,data,options){if(method=="SCRIPT"){return Ext.apply(Ext.get(domNode("script",{type:"text/javascript",src:url},callbacks,options.target||window)),{options:options});}else{if(method=="LINK"){return Ext.apply(Ext.get(domNode("link",{rel:"stylesheet",type:"text/css",href:url},callbacks,options.target||window)),{options:options});}else{return A.request(method,url,callbacks,data,options);}}};var modulate=function(moduleName,options){if(!moduleName){return null;}options||(options={});var mname=String(moduleName.name||moduleName),name=mname.trim().split("/").last(),fname=options?(name.indexOf(".")!==-1?mname:mname+".js"):"",path=options&&options.path?String(options.path):"";var mod=Ext.apply({name:name,fullName:moduleName.name?moduleName.name:fname,extension:!moduleName.name?fname.split(".").last().trim().toLowerCase():"",path:path},options);mod.url=options.url||path+fname;return mod;};Ext.extend(Ext.ux.ModuleManager,Ext.util.Observable,{disableCaching:false,modules:{},method:"GET",noExecute:false,asynchronous:true,cacheResponses:false,timeout:30000,debug:false,loadStack:new Array(),loaded:function(name){var module;return(module=this.getModule(name))?module.loaded===true:false;},getModule:function(name){if(name){name=name.name?name.name:modulate(name,false).name;}return name?this.modules[name]:null;},createModule:function(name,extras){var mod;mod=this.getModule(name);if(!mod){var m=modulate(name,extras);mod=this.modules[m.name]=Ext.apply({executed:false,contentType:"",content:null,loaded:false,pending:false},m);}return mod;},onAvailable:function(modules,callback,scope,timeout,options){if(arguments.length<2){return false;}var MM=this;var block={modules:new Array().concat(modules),poll:function(){if(!this.polling){return ;}var cb=callback,assert=false;var res=Ext.each(this.modules,function(arg,index,args){return assert=(MM.loaded(arg)===true);},this);if(!assert&&this.polling&&!this.aborted){this.poll.defer(50,this);return ;}this.stop();if(cb){cb.call(scope,assert);}},polling:false,abort:function(){this.aborted=true;this.stop();},stop:function(){this.polling=false;if(this.timer){clearTimeout(this.timer);}this.timer=null;},timer:null,timeout:parseInt(timeout||MM.timeout,10)||10000,onTimeout:function(){this.abort();MM.fireEvent("timeout",MM,this.modules);},retry:function(timeout){this.stop();this.polling=true;this.aborted=false;this.timer=this.onTimeout.defer(this.timeout,this);this.poll();return this;}};return block.retry();},provides:function(){Array.prototype.forEach.call(arguments,function(module){var moduleObj=this.createModule(module,false);return Ext.apply(moduleObj,{executed:moduleObj.extension==="js",contentType:"",content:null,loaded:true,pending:false});},this);},load:function(modList){try{var task=new Task(this,Ext.isArray(modList)?modList:Array.prototype.slice.call(arguments,0));task.start();}catch(ex){if(ex!=StopIter){if(task){task.lastError=ex;task.active=false;}this.lastError=ex;this.fireEvent("loadexception",this,task?task.currentModule:null,ex);}}return task;},globalEval:function(data,scope,context){scope||(scope=window);data=String(data||"").trim();if(data.length===0){return false;}try{if(scope.execScript){scope.execScript(data.replace(/^<!--/,"").replace(/-->$/,""));}else{eval.call(scope,data,context||null);}return true;}catch(ex){return ex;}},styleAdjust:null,applyStyle:function(module,styleRules,target){var rules;if(module=this.getModule(module)){var doc=(target||window).document;var ct=(styleRules||(module.content?module.content.text:"")||"")+"";var head;if(doc&&!!ct.length&&(head=doc.getElementsByTagName("head")[0])){if(module.element){this.removeModuleElement(module);}if(this.styleAdjust&&this.styleAdjust.pattern){ct=ct.replace(this.styleAdjust.pattern,this.styleAdjust.replacement||"");}rules=module.element=doc.createElement("style");rules.setAttribute("type","text/css");if(Ext.isIE){head.appendChild(rules);rules.styleSheet.cssText=ct;}else{try{rules.appendChild(doc.createTextNode(ct));}catch(e){rules.cssText=ct;}head.appendChild(rules);}}}return rules;},removeStyle:function(module){return this.removeModuleElement(module);},removeModuleElement:function(module){var el;if(module=this.getModule(module)){if(el=module.element){el.dom?el.removeAllListeners().remove():Ext.removeNode(el);module.element=null;}}}});var Task=Ext.ux.ModuleManager.Task=function(MM,modules){Ext.apply(this,{result:true,active:false,options:null,executed:new Array(),loaded:new Array(),params:null,data:null,oav:null,unlisteners:new Array(),MM:MM,id:Ext.id(null,"mm-task-"),defOptions:{async:MM.asynchronous,headers:MM.headers||false,modulePath:MM.modulePath,forced:false,cacheResponses:MM.cacheResponses,method:(MM.noExecute||MM.cacheResponses?"GET":MM.method||"GET").toUpperCase(),noExecute:MM.noExecute||false,disableCaching:MM.disableCaching,timeout:MM.timeout,callback:null,scope:null,params:null}});this.prepare(modules);};Ext.apply(Task.prototype,{start:function(){this.active=true;this.nextModule();if(this.options.async){this.oav=this.MM.onAvailable.call(this.MM,this.onAvailableList,this.onComplete,this,this.options.timeout,this.options);}else{this.onComplete(this.result);}},doCallBacks:function(o,success,currModule,args){var cb;if(currModule){var res=this.MM.fireEvent.apply(this.MM,[(success?"load":"loadexception"),this.MM,currModule].concat(args||new Array()));if(!success){this.active=res;}if(this.active&&currModule.notify){forEach(currModule.notify,function(chain,index,chains){if(chain){chain.nextModule();chains[index]=null;}});currModule.notify=new Array();}}},success:function(response){var module=response.argument.module.module,opt=response.argument.module,executable=(!opt.proxied&&module.extension=="js"&&!opt.noExecute&&opt.method!=="DOM"),cbArgs=null;this.currentModule=module.name;if(!module.loaded){try{if(this.MM.fireEvent("beforeload",this.MM,module,response,response.responseText)!==false){Ext.apply(module,{loaded:true,pending:false,contentType:response.getResponseHeader?response.getResponseHeader["Content-Type"]||"":"",content:opt.cacheResponses||module.extension=="css"?{text:response.responseText||null,XML:response.responseXML||null,JSON:response.responseJSON||null}:null});this.loaded.push(module);var exception=executable&&(!module.executed||opt.forced)?this.MM.globalEval(response.responseText,opt.target):true;if(exception===true){if(executable){module.executed=true;this.executed.push(module);}cbArgs=[response,response.responseText,module.executed];}else{throw Ext.applyIf({fileName:module.url,lineNumber:exception.lineNumber||0},exception);}}}catch(exl){cbArgs=[{error:(this.lastError=exl),httpStatus:response.status,httpStatusText:response.statusText}];this.result=false;}this.doCallBacks(opt,this.result,module,cbArgs);}else{if(opt.async){this.nextModule();}}},failure:function(response){var module=response.argument.module.module,opt=response.argument.module;module.contentType=response.getResponseHeader?response.getResponseHeader["Content-Type"]||"":"";this.currentModule=module.name;this.result=module.pending=false;this.doCallBacks(opt,this.result,module,[{error:(this.lastError=response.fullStatus.error),httpStatus:response.status,httpStatusText:response.statusText}]);},nextModule:function(){var module,transport,executable,options,url;while(this.active&&(module=this.workList.shift())){if(typeof module=="function"){module.apply(this,[this.result,null,this.loaded]);continue;}if(module.listeners){this.unlisteners.push(module.listeners);this.MM.on(module.listeners);delete module.listeners;}var params=null,data=null,moduleObj;if(params=module.params){if(typeof params=="function"){params=params.call(options.scope||window,options);}if(typeof params=="object"){params=Ext.urlEncode(params);}module.params=data=params;}options=module;if(moduleObj=this.MM.createModule(module.module,{path:options.modulePath})){url=moduleObj.url;executable=(!options.proxied&&moduleObj.extension=="js"&&!options.noExecute);if((!moduleObj.loaded)||options.forced){if(!moduleObj.pending){moduleObj.pending=true;if(/get|script|dom|link/i.test(options.method)){url+=(params?"?"+params:"");if(options.disableCaching===true){url+=(params?"&":"?")+"_dc="+(new Date().getTime());}data=null;}options.async=options.method==="DOM"?true:options.async;transport=gather(options.method=="DOM"?(moduleObj.extension=="css"?"LINK":"SCRIPT"):options.method,url,{success:this.success,failure:this.failure,scope:this,argument:{module:module}},data,options);moduleObj.transport=options.debug?transport:null;if(options.method=="DOM"){moduleObj.element=transport;}}if(options.async){break;}}else{this.active=this.MM.fireEvent("alreadyloaded",this.MM,moduleObj)!==false;if(executable){this.executed.push(moduleObj);}this.loaded.push(moduleObj);}}}if(this.active&&module&&module.async&&moduleObj){moduleObj.notify||(moduleObj.notify=new Array());moduleObj.notify.push(this);}},prepare:function(modules){var onAvailableList=new Array(),workList=new Array(),options=this.defOptions,mtype,MM=this.MM;var adds=new Array();var expand=function(mods){mods=new Array().concat(mods);var adds=new Array();forEach(mods,function(module){if(!module){return ;}var m;mtype=typeof (module);switch(mtype){case"string":m=MM.createModule(module,{path:options.modulePath,url:module.url||null});if(!m.loaded){module=Ext.applyIf({name:m.name,module:m,callback:null},options);delete options.listeners;workList.push(module);adds.push(module);}onAvailableList.push(m.name);break;case"object":if(m=(module.modules||module.module)){adds=expand(m);delete module.module;delete module.modules;}if(module.proxied){module.method="GET";module.cacheResponses=module.async=true;}if(Ext.isArray(module)){adds=expand(module);}else{var mod=module;if(module.name){m=MM.createModule(module,{path:options.modulePath,url:mod.url||null});delete mod.url;Ext.apply(options,mod);if(!m.loaded){mod=Ext.applyIf({name:m.name,module:m,callback:null},options);delete options.listeners;workList.push(mod);adds.push(mod);}onAvailableList.push(m.name);}else{Ext.apply(options,mod);}}break;case"function":workList.push(module);default:}});return adds;};expand(modules);this.options=options;this.workList=workList.flatten().compact();this.onAvailableList=onAvailableList.flatten().unique();},onComplete:function(loaded){var cb;if(loaded){if(cb=this.options.callback){cb.apply(this.options.scope||this,[this.result,this.loaded,this.executed]);}this.MM.fireEvent("complete",this.MM,this.result,this.loaded,this.executed);}if(this.unlisteners){forEach(this.unlisteners,function(block){forEach(block,function(listener,name,listeners){var fn=listener.fn||listener;var scope=listener.scope||listeners.scope||this.MM;var ev=listener.name||name;this.MM.removeListener(ev,fn,scope);},this);},this);}this.active=false;}});}})();(function(){Ext.stopIteration={stopIter:true};Ext.applyIf(Array.prototype,{map:function(D,G){var C=this.length;if(typeof D!="function"){throw new TypeError();}var F=new Array(C);for(var E=0;E<C;E++){if(E in this){F[E]=D.call(G||this,this[E],E,this);}}return F;},include:function(F,D){if(!D&&typeof this.indexOf=="function"){return this.indexOf(F)!=-1;}var E=false;try{this.forEach(function(H,G){if(E=(D?(H.include?H.include(F,D):(H===F)):H===F)){throw Ext.stopIteration;}});}catch(C){if(C!=Ext.stopIteration){throw C;}}return E;},filter:function(E,D){var C=new Array();E||(E=function(F){return F;});this.forEach(function(G,F){if(E.call(D,G,F)){C.push(G);}});return C;},compact:function(D){var C=new Array();this.forEach(function(E){(E===null||E===undefined)||C.push(D&&Ext.isArray(E)?E.compact():E);},this);return C;},flatten:function(){var C=new Array();this.forEach(function(D){Ext.isArray(D)?(C=C.concat(D)):C.push(D);},this);return C;},unique:function(D,E){var C=new Array();this.forEach(function(G,F){if(0==F||(D?C.last()!=G:!C.include(G,E))){C.push(G);}},this);return C;},grep:function(G,F,E){var C=new Array();F||(F=function(H){return H;});var D=E?F.createDelegate(E):F;if(typeof G=="string"){G=new RegExp(G);}this.forEach(function(I,H){if(G.test(I)){C.push(D(I,H));}});return C;},first:function(){return this[0];},last:function(){return this[this.length-1];},clear:function(){this.length=0;},atRandom:function(D){var C=Math.floor(Math.random()*this.length);return this[C]||D;},clone:function(C){if(!C){return this.concat();}var E=this.length||0,D=new Array(E);while(E--){D[E]=B(this[E],true);}return D;},forEach:function(F,D){if(typeof F!="function"){throw new TypeError();}var C=0,E=this.length;while(C<E){F.call(D,this[C],C++,this);}}});window.forEach=function(C,F,D){D=D||C;if(C){if(typeof F!="function"){throw new TypeError();}var E=Object;if(C instanceof Function){E=Function;}else{if(C.forEach instanceof Function){C.forEach(F,D);return ;}else{if(typeof C=="string"){E=String;}else{if(typeof C.length=="number"){return Array.prototype.forEach.call(C,F,D);}}}}return E.forEach(C,F,D);}};var B=function(D,C){if(D&&typeof D.clone=="function"){return D.clone(C);}if(!D){return D;}var E={};forEach(D,function(H,F,G){E[F]=(H===G?E:C?B(H,true):H);});return E;};if(!Array.slice){var A=Array.prototype.slice;Array.slice=function(C){return A.apply(C,A.call(arguments,1));};}forEach([Number,RegExp,Boolean],function(C){C.prototype.clone=function(D){return D?new C(this):this;};});Ext.applyIf(Date.prototype,{clone:function(C){return C?new Date(this.getTime()):this;}});Ext.applyIf(Function.prototype,{forEach:function(C,G,E){if(typeof G!="function"){throw new TypeError();}for(var D in C){if(typeof this.prototype[D]=="undefined"){try{G.call(E,C[D],D,C);}catch(F){}}}},clone:function(C){return this;}});Ext.applyIf(String.prototype,{forEach:function(D,C){if(typeof D!="function"){throw new TypeError();}Array.forEach(this.split(""),function(F,E){D.call(C||this,F,E,this);},this);},trim:function(){var C=/^\s+|\s+$/g;return function(){return this.replace(C,"");};}(),clone:function(C){return C?String(this):this;}});Ext.clone=B;})();